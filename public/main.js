$(function(){!function(){localStorage.nick?$.ajax({url:"/getAll",method:"get"}).done(function(t){let n=t.map(e=>e.nick).indexOf(localStorage.nick);e(-1!=n?++n:null)}):e(null);function e(e){$.ajax({url:"/nicks"}).then(function(t){t.forEach((e,t)=>{l.append(`<p><kbd>${t+1}</kbd> ${e.nick} (${e.wordNumber})</p>`)}),e&&(l.append("<p> ... </p>"),l.append(`<p><kbd>${e}</kbd> ${localStorage.nick}`))})}}();let e=$(".startBtn"),t=$(".nickname"),n=($("#save-score"),$("#start-again")),l=$(".winner-scores"),a=$("#inputForNick"),i=$(".clear-screen"),o=$(".language"),c=0;o.on("click",function(){o.removeClass("selected"),$(this).addClass("selected")}),e.on("click",function(){!function(){o.hide(),e.hide(),t.hide();let n=$(".selected").html(),l=3,s=srpskeReci.split("\n"),r="en"==n?mmm.filter(e=>e.length==l):s.filter(e=>e.length==l),u=6,f=r,p=!1,d=[],h=$(".line"),m=h.length,k=7e3,g=$(".display-result"),v=setInterval(()=>{l++,f="en"==n?mmm.filter(e=>e.length==l):s.filter(e=>e.length==l),k+=700},2e4),b=$("#main-input");function y(){let e=$(this);if(d.includes(this.value)){let t=d.indexOf(this.value);d.splice(t,1),0==d.length&&i.fadeIn(500).fadeOut(300),$("span").filter(function(){return $(this).text()===e.val()}).css("background","skyblue").fadeOut(100,function(){$(this).remove(),c++,g.html(parseInt(g.html())+1)}),b.val("")}}b.focus(),b.on("keyup",y);let I=setInterval(()=>{let e=$("span");e.css({left:"+=1"}),$.each(e,function(e,n){$(n).position().left>850?function(){clearInterval(I),clearInterval(v),b.off("keyup",y),p=!0,localStorage.nick&&a.val(localStorage.nick);t.show()}():$(n).position().left>700&&$(n).position().left<710&&$(n).addClass("danger")})},100);function w(){let e=Math.floor(Math.random()*f.length),t=f[e].toLowerCase();return d.push(t),f.splice(e,1),t}!function e(){for(let e=0;e<m;e++){const t=$(h[e]);let n=Math.floor(20*Math.random());if(n<=u){let e=w();t.append("<span>"+e+"</span>")}}p||setTimeout(e,k)}()}()}),$("#finish_form").submit(function(e){return $('[type="submit"]').attr("value","yee"),$("<input />").attr("type","hidden").attr("name","fw").attr("value",c).appendTo(this),!0}),n.on("click",function(){location.reload()})});